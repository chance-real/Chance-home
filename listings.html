<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì°¬ìŠ¤ë¶€ë™ì‚° - í”„ë¦¬ë¯¸ì—„ ë§¤ë¬¼ê´€</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ê³µí†µ ìŠ¤íƒ€ì¼ (index.htmlê³¼ ë™ì¼) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; color: #333; line-height: 1.6; background-color: #fcfcfc; }
        a { text-decoration: none; color: inherit; }
        :root { --chance-blue: #2980b9; --chance-dark: #2c3e50; }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; border-bottom: 1px solid #eee;
            background-color: rgba(255, 255, 255, 0.95);
            position: sticky; top: 0; z-index: 1000;
            backdrop-filter: blur(5px);
        }
        .logo img { height: 60px; width: auto; } 
        .nav-menu { display: flex; gap: 20px; font-weight: 700; font-size: 1rem; align-items: center; }
        .nav-menu a:hover { color: var(--chance-blue); }
        .btn-register { background-color: var(--chance-blue); color: white !important; padding: 10px 20px; border-radius: 5px; }

        /* ë§¤ë¬¼ê´€ ì „ìš© ìŠ¤íƒ€ì¼ */
        .listing-hero {
            background-color: var(--chance-dark); color: white;
            padding: 60px 5%; text-align: center;
        }
        .listing-hero h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .listing-hero p { color: #bdc3c7; }

        /* ì¹´í…Œê³ ë¦¬ í•„í„° */
        .filter-container {
            display: flex; justify-content: center; gap: 10px;
            padding: 30px 5%; background: white; border-bottom: 1px solid #eee;
            flex-wrap: wrap;
        }
        .filter-btn {
            border: 1px solid #ddd; background: white; padding: 8px 20px;
            border-radius: 20px; cursor: pointer; font-weight: 700; color: #555;
            transition: 0.3s;
        }
        .filter-btn:hover, .filter-btn.active {
            background-color: var(--chance-blue); color: white; border-color: var(--chance-blue);
        }

        /* ë§¤ë¬¼ ê·¸ë¦¬ë“œ (ì¸ìŠ¤íƒ€ ìŠ¤íƒ€ì¼) */
        .listings-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px; padding: 40px 5%; max-width: 1400px; margin: 0 auto;
        }
        
        .listing-card {
            background: white; border-radius: 12px; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.3s;
            position: relative; border: 1px solid #eee;
            display: flex; flex-direction: column;
        }
        .listing-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

        .card-image-box {
            position: relative; width: 100%; padding-top: 75%; /* 4:3 ë¹„ìœ¨ */
            overflow: hidden; background: #eee;
        }
        .card-image-box img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; transition: transform 0.5s;
        }
        .listing-card:hover .card-image-box img { transform: scale(1.05); }

        .card-badge {
            position: absolute; top: 15px; left: 15px;
            background: rgba(0,0,0,0.7); color: white;
            padding: 5px 10px; font-size: 0.8rem; border-radius: 4px;
            font-weight: 700;
        }
        .card-status {
            position: absolute; top: 15px; right: 15px;
            padding: 5px 10px; font-size: 0.8rem; border-radius: 4px;
            font-weight: 700; text-transform: uppercase;
        }
        .status-sale { background: #e74c3c; color: white; } /* ë§¤ë§¤ */
        .status-rent { background: #f1c40f; color: #333; } /* ì„ëŒ€ */
        .status-done { background: #95a5a6; color: white; } /* ì™„ë£Œ */

        .card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-price { font-size: 1.3rem; font-weight: 900; color: var(--chance-blue); margin-bottom: 5px; }
        .card-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; color: #2c3e50; line-height: 1.4; }
        .card-desc { font-size: 0.9rem; color: #7f8c8d; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;}
        
        .card-footer { 
            margin-top: auto; padding-top: 15px; border-top: 1px solid #f0f0f0;
            display: flex; justify-content: space-between; font-size: 0.85rem; color: #999;
        }

        /* ë¡œë”© ìƒíƒœ */
        .loading-msg { text-align: center; grid-column: 1/-1; padding: 50px; color: #777; }

        @media (max-width: 768px) {
            header { flex-direction: column; gap: 15px; }
            .nav-menu { flex-wrap: wrap; justify-content: center; }
            .listing-hero h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <a href="index.html"><img src="logo.jpg" alt="ì°¬ìŠ¤ë¶€ë™ì‚°"></a>
        </div>
        <nav class="nav-menu">
            <a href="index.html">ğŸ  í™ˆìœ¼ë¡œ</a>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScsjftj28uaaFnGJbopfBkk1lZ_nl-XKub33LJqyc_Wdhy8sA/viewform" target="_blank" class="btn-register">âš¡ ë§¤ë¬¼ ì ‘ìˆ˜</a>
        </nav>
    </header>

    <div class="listing-hero">
        <h1>ğŸ’ í”„ë¦¬ë¯¸ì—„ ë§¤ë¬¼ê´€</h1>
        <p>ì°¬ìŠ¤ë¶€ë™ì‚°ì´ ì—„ì„ í•œ ìµœê³ ì˜ ë§¤ë¬¼ì„ ë§Œë‚˜ë³´ì„¸ìš”.</p>
    </div>

    <div class="filter-container">
        <button class="filter-btn active" onclick="filterListings('all')">ì „ì²´ë³´ê¸°</button>
        <button class="filter-btn" onclick="filterListings('ì•„íŒŒíŠ¸')">ì•„íŒŒíŠ¸</button>
        <button class="filter-btn" onclick="filterListings('ìƒê°€')">ìƒê°€/ì‚¬ë¬´ì‹¤</button>
        <button class="filter-btn" onclick="filterListings('í† ì§€')">í† ì§€/ê¸°íƒ€</button>
    </div>

    <div class="listings-grid" id="listing-container">
        <div class="loading-msg">ë§¤ë¬¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>

    <script>
        let allListings = [];

        // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        fetch('data/listings.json')
            .then(response => {
                if (!response.ok) throw new Error("ë°ì´í„° íŒŒì¼ ì—†ìŒ");
                return response.json();
            })
            .then(data => {
                // ë°ì´í„°ê°€ ê°ì²´ ì•ˆì— 'listings' ë°°ì—´ë¡œ ìˆëŠ”ì§€, ê·¸ëƒ¥ ë°°ì—´ì¸ì§€ í™•ì¸
                allListings = data.listings ? data.listings : (Array.isArray(data) ? data : []);
                renderListings(allListings);
            })
            .catch(error => {
                document.getElementById('listing-container').innerHTML = 
                    '<div class="loading-msg">í˜„ì¬ ë“±ë¡ëœ ë§¤ë¬¼ì´ ì—†ê±°ë‚˜ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>(ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ë§¤ë¬¼ì„ ë“±ë¡í•´ì£¼ì„¸ìš”)</div>';
                console.error('Error:', error);
            });

        function renderListings(items) {
            const container = document.getElementById('listing-container');
            container.innerHTML = '';

            if (items.length === 0) {
                container.innerHTML = '<div class="loading-msg">ë“±ë¡ëœ ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            items.forEach(item => {
                // ê°€ê²© í‘œì‹œ ë¡œì§ (ë§¤ë§¤ê°€ ë˜ëŠ” ë³´ì¦ê¸ˆ/ì›”ì„¸)
                let priceTag = '';
                if(item.type === 'ë§¤ë§¤') {
                    priceTag = `ë§¤ë§¤ ${item.price}`;
                } else {
                    priceTag = `${item.deposit} / ${item.rent}`;
                }

                // ìƒíƒœì— ë”°ë¥¸ í´ë˜ìŠ¤ ë° í…ìŠ¤íŠ¸
                let statusClass = 'status-sale';
                if(item.status === 'ì„ëŒ€') statusClass = 'status-rent';
                if(item.status === 'ê±°ë˜ì™„ë£Œ') statusClass = 'status-done';

                const html = `
                    <div class="listing-card">
                        <div class="card-image-box">
                            <img src="${item.image}" alt="${item.title}" onerror="this.src='bg.jpg'">
                            <span class="card-badge">${item.category}</span>
                            <span class="card-status ${statusClass}">${item.status}</span>
                        </div>
                        <div class="card-content">
                            <div class="card-price">${priceTag}</div>
                            <h3 class="card-title">${item.title}</h3>
                            <p class="card-desc">${item.description}</p>
                            <div class="card-footer">
                                <span>ğŸ“ ë¬¸ì˜: 044-864-4953</span>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function filterListings(category) {
            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ë³€ê²½
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (category === 'all') {
                renderListings(allListings);
            } else {
                const filtered = allListings.filter(item => item.category === category);
                renderListings(filtered);
            }
        }
    </script>
</body>
</html>
